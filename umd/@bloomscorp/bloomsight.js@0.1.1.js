(()=>{"use strict";var e={45:(e,o,t)=>{function r(e){return!(null==e)}function n(e){return r(e)&&e.length>0}function i(e){return!n(e)}function s(e){return r(e)&&(""===e.trim()||0===e.trim().length)}function l(e,o){return n(e)&&e.length===o}function a(e,o,t=!1){return!(!r(e)||!r(o))&&(t?e.toLowerCase()===o.toLowerCase():e===o)}function c(e){return JSON.parse(JSON.stringify(e))}function u(e){return 0===Object.keys(e).length}t.r(o),t.d(o,{areStringsEqual:()=>a,arrayDeepCopy:()=>c,arrayEmpty:()=>i,arrayLength:()=>l,arrayNotEmpty:()=>n,isEmptyObject:()=>u,isEmptyString:()=>s,valueExists:()=>r})},915:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isDevelopmentMode=o.resolvePropertyToken=o.isConfiguredProperly=o.initConfig=o.config=void 0,o.config=null;const t={stopSimpleEvent:!1,stopDataEvent:!1,stopPageViewEvent:!1,stopAll:!1,logOnly:!1,observePageViaWebAPI:!0};function r(){return o.config?o.config.propertyToken:""}function n(){return!!o.config&&o.config.isDevelopmentMode}o.initConfig=function(e){o.config={...t,...e},n()&&console.log("configuration: ",o.config)},o.isConfiguredProperly=function(){return!!r()},o.resolvePropertyToken=r,o.isDevelopmentMode=n},746:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveDataEvent=void 0;const r=t(206),n=t(915),i=t(743),s=t(275),l=t(617),a=t(535),c=t(123);o.resolveDataEvent=function(e,o){if((0,r.isBot)()&&(n.config.stopAll=!0),n.config?.stopAll||n.config?.stopDataEvent)return;const t={property:(0,n.resolvePropertyToken)(),dataEventToken:e,eventLogData:o,userId:(0,a.resolveUserId)(),ipAddress:(0,i.resolveIPAddress)(),city:(0,i.resolveCity)(),countryCode:(0,i.resolveCountry)(),region:(0,i.resolveRegion)(),browserName:(0,s.resolveBrowser)(),osName:(0,s.resolveOS)(),deviceType:(0,s.resolveDevice)(),url:window.location.href||""},u=(0,c.retrieveEventList)();u&&u.includes(e)||(a.isNewUser?t.newUser=!0:t.returningUser=!0,t.newSession=!0,(0,c.storeEventList)([...u,e])),(0,n.isDevelopmentMode)()&&console.log("data event data: ",t),(0,l.logDataEvent)(t,(()=>{}),(e=>{}),(o=>{(0,n.isDevelopmentMode)()&&console.log(`event ${e} logged successfully`)}),(e=>{(0,n.isDevelopmentMode)()&&console.log(`event log error: ${e}`)}),(()=>{}))}},123:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.retrieveEventList=o.storeEventList=void 0;const r=t(405),n="eventList";o.storeEventList=function(e){(0,r.store)(n,JSON.stringify(e))},o.retrieveEventList=function(){return JSON.parse((0,r.retrieve)(n))}},845:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolvePageViewEvent=o.pageViewObserver=o.initPageViewEventHandler=void 0;const r=t(915),n=t(743),i=t(275),s=t(764),l=t(482),a=t(313),c=t(206),u=t(535),d=t(123),v="startUrl",f="SITE_VISITED";let g=!1,p=!1;function m(){g?y(!1,(0,a.resolveUTMData)(window.location.href)):(y(!0,(0,a.resolveUTMData)(window.location.href)),g=!0)}function E(e){return e?document.referrer:(0,l.retrieve)(v)}function y(e,o){if((0,c.isBot)()&&(r.config.stopAll=!0),r.config?.stopAll||r.config?.stopPageViewEvent)return;const t={property:(0,r.resolvePropertyToken)(),userId:(0,u.resolveUserId)(),referredUrl:E(e),ipAddress:(0,n.resolveIPAddress)(),city:(0,n.resolveCity)(),countryCode:(0,n.resolveCountry)(),region:(0,n.resolveRegion)(),browserName:(0,i.resolveBrowser)(),osName:(0,i.resolveOS)(),deviceType:(0,i.resolveDevice)(),url:window.location.href||"",title:document.title||"",utmCampaign:o.utmCampaign,utmContent:o.utmContent,utmMedium:o.utmMedium,utmSource:o.utmSource,utmTerm:o.utmTerm},a=(0,d.retrieveEventList)();a&&a.includes(f)||(u.isNewUser?t.newUser=!0:t.returningUser=!0,t.newSession=!0,(0,d.storeEventList)([...a,f])),e||p||(p=!0,t.debounce=!0),(0,r.isDevelopmentMode)()&&console.log("page view data: ",t),r.config?.logOnly&&(0,l.store)("startUrl",window.location.href),(0,s.logPageViewEvent)(t,(()=>{}),(e=>{}),(e=>{(0,r.isDevelopmentMode)()&&console.log("page view event logged successfully")}),(e=>{(0,r.isDevelopmentMode)()&&console.log(`event log error: ${e}`)}),(()=>{(0,l.store)("startUrl",window.location.href)}))}o.initPageViewEventHandler=function(){window.addEventListener("load",(()=>m()))},o.pageViewObserver=m,o.resolvePageViewEvent=y},712:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveSimpleEvent=void 0;const r=t(275),n=t(915),i=t(743),s=t(875),l=t(206),a=t(535),c=t(123);o.resolveSimpleEvent=function(e){if((0,l.isBot)()&&(n.config.stopAll=!0),n.config?.stopAll||n.config?.stopSimpleEvent)return;const o={property:(0,n.resolvePropertyToken)(),simpleEventToken:e,userId:(0,a.resolveUserId)(),ipAddress:(0,i.resolveIPAddress)(),city:(0,i.resolveCity)(),countryCode:(0,i.resolveCountry)(),region:(0,i.resolveRegion)(),browserName:(0,r.resolveBrowser)(),osName:(0,r.resolveOS)(),deviceType:(0,r.resolveDevice)(),url:window.location.href||""},t=(0,c.retrieveEventList)();t&&t.includes(e)||(a.isNewUser?o.newUser=!0:o.returningUser=!0,o.newSession=!0,(0,c.storeEventList)([...t,e])),(0,n.isDevelopmentMode)()&&console.log("simple event data: ",o),(0,s.logSimpleEvent)(o,(()=>{}),(e=>{}),(o=>{(0,n.isDevelopmentMode)()&&console.log(`event ${e} logged successfully`)}),(e=>{(0,n.isDevelopmentMode)()&&console.log(`event log error: ${e}`)}),(()=>{}))}},743:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveCity=o.resolveRegion=o.resolveCountry=o.resolveIPAddress=o.initLocation=void 0;const r=t(482),n=t(915),i=t(659),s="city",l="region",a="country";o.initLocation=function(e){(0,i.resolveLocation)((()=>{}),(e=>{}),(e=>{var o;o=e,(0,r.store)("ip",o.ip),(0,r.store)(s,o.city),(0,r.store)(l,o.region),(0,r.store)(a,o.country),(0,n.isDevelopmentMode)()&&(console.log(`ip: ${o.ip}`),console.log(`city: ${o.city}`),console.log(`region: ${o.region}`),console.log(`country: ${o.country}`))}),(e=>{(0,n.isDevelopmentMode)()&&console.log(`failed to resolve location: ${e}`)}),(()=>{e()}))},o.resolveIPAddress=function(){return(0,r.retrieve)("ip")},o.resolveCountry=function(){return(0,r.retrieve)(a)},o.resolveRegion=function(){return(0,r.retrieve)(l)},o.resolveCity=function(){return(0,r.retrieve)(s)}},963:(e,o)=>{var t;Object.defineProperty(o,"__esModule",{value:!0}),o.IBrowser=void 0,function(e){e.Unknown="Unknown",e.Chrome="Google Chorme",e.Firefox="Mozilla Firefox",e.Safari="Apple Safari",e.ME_Legacy="Microsoft Edge (Legacy)",e.ME_Chromium="Microsoft Edge (Chromium)",e.IE="Microsoft Internet Explorer",e.Opera="Opera",e.Opera_Next="Opera Next"}(t||(o.IBrowser=t={}))},113:(e,o)=>{var t;Object.defineProperty(o,"__esModule",{value:!0}),o.IDevice=void 0,function(e){e.Unknown="Unknown",e.Tablet="Tablet",e.Mobile="Mobile",e.Desktop="Desktop"}(t||(o.IDevice=t={}))},236:(e,o)=>{var t;Object.defineProperty(o,"__esModule",{value:!0}),o.IOperatingSystem=void 0,function(e){e.Unknown="Unknown",e.MacOS="MacOS",e.Linux="Linux",e.Windows="Windows",e.Android="Android",e.iOS="iOS"}(t||(o.IOperatingSystem=t={}))},275:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveDevice=o.resolveOS=o.resolveBrowserVersion=o.resolveBrowser=o.initPlatform=void 0;const r=t(963),n=t(236),i=t(113),s=t(915),l=window.navigator.userAgent;function a(){let e=0,o=0;switch(!0){case-1!==l.indexOf("Opera"):return r.IBrowser.Opera;case-1!==l.indexOf("OPR"):return r.IBrowser.Opera_Next;case-1!==l.indexOf("Edge"):return r.IBrowser.ME_Legacy;case-1!==l.indexOf("Edg"):return r.IBrowser.ME_Chromium;case-1!==l.indexOf("Chrome"):return r.IBrowser.Chrome;case-1!==l.indexOf("Safari"):return r.IBrowser.Safari;case-1!==l.indexOf("Firefox"):return r.IBrowser.Firefox;case-1!==l.indexOf("MSIE"):case-1!==l.indexOf("Trident"):return r.IBrowser.IE;case(e=l.lastIndexOf(" ")+1)<(o=l.lastIndexOf("/")):return l.substring(e,o);default:return r.IBrowser.Unknown}}function c(){switch(!0){case-1!==l.indexOf("Windows"):return n.IOperatingSystem.Windows;case-1!==l.indexOf("Mac OS"):return n.IOperatingSystem.MacOS;case-1!==l.indexOf("Linux"):return n.IOperatingSystem.Linux;case-1!==l.indexOf("Android"):return n.IOperatingSystem.Android;case-1!==l.indexOf("iOS"):return n.IOperatingSystem.iOS;default:return n.IOperatingSystem.Unknown}}function u(){return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(l)?i.IDevice.Tablet:/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|webOS)/i.test(l)?i.IDevice.Mobile:i.IDevice.Desktop}o.initPlatform=function(){const e=a(),o=c(),t=u();(0,s.isDevelopmentMode)()&&(console.log(`browser: ${e}`),console.log(`os: ${o}`),console.log(`device: ${t}`))},o.resolveBrowser=a,o.resolveBrowserVersion=function(){const e=l.match(/(Chrome|Firefox|Safari|Edge|IE|Opera|Trident)[\/\s](\d+(\.\d+)*)/);return e&&e[2]?e[2]:"Unknown"},o.resolveOS=c,o.resolveDevice=u},879:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.initSession=void 0;const r=t(405),n=t(123),i=t(535),s=t(482),l="sessionEnd",a=30;let c=Date.now();function u(){c+6e4-Date.now()<0&&(function(){const e=v();Date.now()>e?((0,i.setUserStatus)(!1),d(!0)):d(!1)}(),c=Date.now())}function d(e){(0,s.store)(l,JSON.stringify(Date.now()+60*a*1e3)),e&&(0,n.storeEventList)([])}function v(){return+(0,r.retrieve)(l)}o.initSession=function(){const e=v();e?Date.now()>e?((0,i.setUserStatus)((0,i.hasUserReturnedUnderNewUserTenureLimit)(e)),d(!0)):(0,i.setUserStatus)(!0):((0,i.setUserStatus)(!0),d(!0)),window.addEventListener("keydown",(()=>u())),window.addEventListener("mousemove",(()=>u())),window.addEventListener("click",(()=>u())),window.addEventListener("scroll",(()=>u())),window.addEventListener("wheel",(()=>u()))}},119:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RESOURCE_VALIDATION_ERROR=void 0,o.RESOURCE_VALIDATION_ERROR="We could not validate your authority to access resources"},23:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.HTTP_HEADERS=o.ADD_PAGE_VIEW_EVENT_API=o.ADD_DATA_EVENT_API=o.ADD_SIMPLE_EVENT_API=o.LOCATION_API=void 0;const t="https://api.bloomsight.io/api/v1";o.LOCATION_API="https://api.bloomsight.io/service/get-my-ip",o.ADD_SIMPLE_EVENT_API=t+"/simple-event-data/add",o.ADD_DATA_EVENT_API=t+"/data-event-data/add",o.ADD_PAGE_VIEW_EVENT_API=t+"/page-view-data/add",o.HTTP_HEADERS=new Headers({"Content-Type":"application/json"})},617:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.logDataEvent=void 0;const r=t(65),n=t(23),i=t(915);o.logDataEvent=function(e,o,t,s,l,a){i.config?.logOnly||(0,r.executePostPayload)(n.ADD_DATA_EVENT_API,e,n.HTTP_HEADERS,o,t,s,l,a)}},659:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveLocation=void 0;const r=t(65),n=t(23);o.resolveLocation=function(e,o,t,i,s){(0,r.executeGetPayload)(n.LOCATION_API,n.HTTP_HEADERS,e,o,t,i,s,"information")}},764:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.logPageViewEvent=void 0;const r=t(65),n=t(23),i=t(915);o.logPageViewEvent=function(e,o,t,s,l,a){i.config?.logOnly||(0,r.executePostPayload)(n.ADD_PAGE_VIEW_EVENT_API,e,n.HTTP_HEADERS,o,t,s,l,a)}},875:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.logSimpleEvent=void 0;const r=t(65),n=t(23),i=t(915);o.logSimpleEvent=function(e,o,t,s,l,a){i.config?.logOnly||(0,r.executePostPayload)(n.ADD_SIMPLE_EVENT_API,e,n.HTTP_HEADERS,o,t,s,l,a)}},65:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.executePostPayload=o.executeGetPayload=o.executeBasicGet=void 0;const r=t(45),n=t(119);o.executeBasicGet=function(e,o,t,r,i,s,l){t(),fetch(e,{method:"GET",headers:o}).then((e=>e.json())).then((e=>{r(e.message),e.success?i(e.message):s(n.RESOURCE_VALIDATION_ERROR)})).catch((e=>s(e.toString()))).finally((()=>l()))},o.executeGetPayload=function(e,o,t,i,s,l,a,c){t(),fetch(e,{method:"GET",headers:o}).then((e=>e.json())).then((e=>{i(e[c]),e.success?s(e[c]):l((0,r.isEmptyString)(e.message)?n.RESOURCE_VALIDATION_ERROR:e.message)})).catch((e=>l(e.toString()))).finally((()=>a()))},o.executePostPayload=function(e,o,t,i,s,l,a,c){i(),fetch(e,{method:"POST",headers:t,body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{s(e),e.success?l(e):a((0,r.isEmptyString)(e.message)?n.RESOURCE_VALIDATION_ERROR:e.message)})).catch((e=>a(e.toString()))).finally((()=>c()))}},535:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.setUserStatus=o.hasUserReturnedUnderNewUserTenureLimit=o.resolveUserId=o.initUser=o.isNewUser=void 0;const r=t(405),n=t(356),i=t(915),s="userId";o.isNewUser=!1;let l="";o.initUser=function(){var e;(0,r.retrieve)(s)?l=(0,r.retrieve)(s):(l=(0,n.generateUserId)(),e=l,(0,r.store)(s,e)),(0,i.isDevelopmentMode)()&&console.log(`active user id: ${l}`)},o.resolveUserId=function(){return l||(0,r.retrieve)(s)},o.hasUserReturnedUnderNewUserTenureLimit=function(e){return Date.now()-e>3888e6},o.setUserStatus=function(e){o.isNewUser=e}},206:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isBot=void 0;const t=["user-agent","Mozilla/3.0 ","Mozilla/2.0 ","Mozilla/1.0 ","Mozilla "," Mozilla/","Mozila/","Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol"],r=[" (compatible;MSIE ",".0;Windows NT ","loader","googlebot","bingbot","yandexbot","duckduckbot","baiduspider","facebookexternalhit","twitterbot"],n=["_","CertUtil URL Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:60.0)","Mozilla/5.0 (Windows NT 6.3; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0","HTTPS","Erbium-UA-4ce7c27cb4be9d32e333bf032c88235a","x","xxx"],i=window.navigator.userAgent;o.isBot=function(){return r.some((e=>i.includes(e)))||t.some((e=>i.startsWith(e)))||n.some((e=>i===e))}},356:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.generateUserId=void 0,o.generateUserId=function(){return(Date.now()+Math.random()).toString(36)}},405:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clear=o.retrieve=o.store=void 0,o.store=function(e,o){localStorage.setItem(e,o)},o.retrieve=function(e){const o=localStorage.getItem(e);return null===o?"":o},o.clear=function(){localStorage.clear()}},482:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clear=o.retrieve=o.store=void 0,o.store=function(e,o){sessionStorage.setItem(e,o)},o.retrieve=function(e){const o=sessionStorage.getItem(e);return null===o?"":o},o.clear=function(){sessionStorage.clear()}},313:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.resolveUTMData=void 0,o.resolveUTMData=function(e){const o=new URLSearchParams(e);return{utmCampaign:o.get("utm_campaign")||"",utmContent:o.get("utm_content")||"",utmMedium:o.get("utm_medium")||"",utmSource:o.get("utm_source")||"",utmTerm:o.get("utm_term")||""}}}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var i=o[r]={exports:{}};return e[r](i,i.exports,t),i.exports}t.d=(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{t(275),t(743),t(535),t(879),t(845),t(915);t(712),t(746),t(845)})()})();